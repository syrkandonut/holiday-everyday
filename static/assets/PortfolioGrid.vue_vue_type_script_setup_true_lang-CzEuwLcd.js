import{d as _,o as s,c as o,t as d,q as T,R as w,b as k,a as p,u as f,F as m,h,e as y,s as v,E as I,y as A,S,m as $}from"./index-ep92Lj8v.js";import{A as b,c as B,u as L}from"./usePortfolio-DUfdnArz.js";import{L as O}from"./LazyImage-BnUXDqxF.js";const R={class:"rounded-full border border-grey p-2 text-grey-200 t-sm"},C=_({__name:"Tag",props:{text:{}},setup(c){return(e,a)=>(s(),o("span",R,d(e.text.toLowerCase()),1))}}),g=T(null),D=()=>{const c=async()=>{try{const e=await b.get("/tags/");g.value=B(e.data)}catch(e){console.log(e)}};return g.value||c(),g},E={class:"flex flex-col gap-6"},F={class:"flex flex-col gap-3 text-primary"},G={class:"t-md"},N={key:0,class:"flex flex-wrap gap-2"},V=_({__name:"PortfolioItem",props:{id:{},previewImage:{},title:{},type:{},customer:{},tags:{},review:{}},setup(c){const e=w(),a=D();return(r,u)=>(s(),o("div",{onClick:u[0]||(u[0]=l=>f(e).push(`/portfolio/${r.id}`)),class:"group flex cursor-pointer flex-col gap-5 sm:col-span-4 sm:[&:nth-child(4n+1)]:col-span-5 sm:[&:nth-child(4n+4)]:col-span-5"},[k(O,{src:r.previewImage,alt:r.title,class:"rounded-xl ~h-[17.5rem]/[40rem]",scaleable:""},null,8,["src","alt"]),p("div",E,[p("div",F,[p("h4",null,d(r.title),1),p("p",G,d(r.customer),1)]),f(a)?(s(),o("div",N,[(s(!0),o(m,null,h(r.tags,l=>{var t;return s(),y(C,{text:((t=f(a).get(l))==null?void 0:t.name)||"",key:l,class:"rounded-full border border-grey p-2 text-grey-200 t-sm"},null,8,["text"])}),128))])):v("",!0)])]))}}),j={class:"grid grid-cols-1 gap-6 sm:grid-cols-9"},q={key:0,class:"mx-auto text-center ~py-16/28"},Y=_({__name:"PortfolioGrid",props:{filter:{}},setup(c){const e=c,a=L();function r(t,n){return t.filter(i=>n.includes(i.type))}function u(t,n){return t.filter(i=>{const x=new Set(i.tags);return n.every(P=>x.has(P))})}const l=I(()=>{if(a.value===null)return[];const t=Array.from(a.value.values());return e.filter?e.filter.types.length>0&&e.filter.tags.length===0?r(t,e.filter.types):e.filter.types.length===0&&e.filter.tags.length>0?u(t,e.filter.tags):e.filter.types.length>0&&e.filter.tags.length>0?u(r(t,e.filter.types),e.filter.tags):t:t.filter(n=>n.type==="WEDDING").slice(0,4)});return(t,n)=>(s(),o(m,null,[A(p("div",j,[(s(!0),o(m,null,h(l.value,i=>(s(),y(V,$({ref_for:!0},i,{key:i.id}),null,16))),128))],512),[[S,l.value.length]]),l.value.length?v("",!0):(s(),o("h2",q," Ничего не найдено, отрегулируйте фильтр "))],64))}});export{Y as _,C as a,D as u};
